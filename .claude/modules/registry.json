{
  "version": "1.0.0",
  "last_updated": null,
  "modules": {
    "coordinate-navigation": {
      "id": "coordinate-navigation",
      "name": "Coordinate Navigation & Maps",
      "version": "1.0.0",
      "description": "Coordinate-based navigation, pathfinding, and map visualization",
      "_status": "Active",
      "activation": "per-campaign (locations have 'coordinates' field)",
      "dependencies": {
        "core": [
          "lib/json_ops.py"
        ]
      },
      "provides": {
        "lib": [
          "pathfinding.py",
          "path_manager.py",
          "path_intersect.py",
          "path_split.py",
          "map_renderer.py",
          "map_gui.py",
          "navigation_manager.py"
        ],
        "tools": [
          "dm-navigation.sh",
          "dm-map.sh"
        ]
      },
      "integration_points": {
        "dm-location.sh": "Calls navigation_manager.py when --from/--bearing/--distance provided",
        "dm-map.sh": "Replaced by module's dm-map.sh"
      },
      "tests": "tests/test_navigation.py"
    },
    "firearms-combat": {
      "id": "firearms-combat",
      "name": "Firearms Combat System",
      "version": "1.0.0",
      "author": "DM System Core",
      "description": "Automated firearms combat resolver with penetration mechanics, RPM simulation, and fire mode support for modern/STALKER campaigns",
      "category": "combat",
      "tags": [
        "firearms",
        "combat",
        "ballistics",
        "stalker",
        "modern"
      ],
      "dependencies": [],
      "soft_dependencies": [],
      "incompatible_with": [],
      "enabled_by_default": false,
      "features": [
        "Full-auto fire mode with RPM-based shot calculation",
        "Penetration vs Protection damage scaling",
        "Subclass bonuses (Стрелок sharpshooter)",
        "Critical hit mechanics (2× dice on nat 20)",
        "Multi-target distribution",
        "Auto XP tracking",
        "Test mode for dry runs"
      ],
      "activation": {
        "type": "field-based",
        "condition": "campaign_rules.firearms_system exists in campaign-overview.json"
      },
      "adds_to_core": {
        "tools": [
          "dm-combat.sh"
        ],
        "commands": {
          "dm-combat.sh resolve": "Resolve firearms combat with auto-damage calculation"
        },
        "data_fields": {
          "campaign_rules": {
            "firearms_system": {
              "weapons": {
                "AK-74": {
                  "damage": "2d8+2",
                  "pen": 6,
                  "rpm": 650,
                  "ammo_type": "5.45x39mm"
                }
              },
              "fire_modes": {
                "full_auto": {
                  "penalty_per_shot": -2,
                  "penalty_per_shot_sharpshooter": -1
                }
              }
            }
          }
        }
      },
      "use_cases": [
        "STALKER campaigns with Svoboda/Долговцы firefights",
        "Fallout-style wasteland combat",
        "Modern military operations",
        "Cyberpunk gunfights",
        "Zombie apocalypse firearms survival"
      ],
      "_status": "Active"
    },
    "encounter-system": {
      "id": "encounter-system",
      "name": "Encounter System (Random Travel Events)",
      "version": "1.0.0",
      "author": "DM System Core",
      "description": "Random encounter checks during overland travel with distance-based segmentation, DC scaling, and waypoint mechanics for interrupted journeys",
      "category": "travel-mechanics",
      "tags": [
        "encounters",
        "travel",
        "random-events",
        "waypoints",
        "combat"
      ],
      "dependencies": [],
      "soft_dependencies": [],
      "incompatible_with": [],
      "enabled_by_default": false,
      "features": [
        "Distance-based encounter segmentation (1-3 checks per journey)",
        "DC scaling by distance and time of day",
        "Character stat-based modifiers (D&D abilities, skills, or custom stats)",
        "Encounter nature categories (Dangerous, Neutral, Beneficial, Special)",
        "Waypoint creation for Combat/Social/Hazard encounters",
        "Auto-resolve for Loot/Flavor encounters",
        "Temporary waypoint locations with forward/back navigation",
        "Configurable difficulty, stats, and time modifiers"
      ],
      "activation": {
        "type": "field-based",
        "condition": "campaign_rules.encounter_system.enabled = true"
      },
      "adds_to_core": {
        "tools": [
          "dm-encounter.sh"
        ],
        "commands": {
          "dm-encounter.sh toggle": "Enable/disable encounter system",
          "dm-encounter.sh status": "Show current configuration",
          "dm-encounter.sh set-base-dc <dc>": "Set base DC for encounter checks",
          "dm-encounter.sh set-distance-mod <modifier>": "Set DC increase per km",
          "dm-encounter.sh set-stat <stat_name>": "Set stat for checks (stealth, custom:awareness, etc.)",
          "dm-encounter.sh set-time-mod <time> <modifier>": "Set time-of-day DC modifier",
          "dm-encounter.sh check <from> <to> <distance_m> [terrain]": "Manual encounter check"
        },
        "data_fields": {
          "campaign_rules": {
            "encounter_system": {
              "enabled": false,
              "min_distance_meters": 300,
              "base_dc": 16,
              "distance_modifier": 2,
              "stat_to_use": "stealth",
              "use_luck": false,
              "time_dc_modifiers": {
                "Morning": 0,
                "Day": 0,
                "Evening": 2,
                "Night": 4
              }
            }
          }
        }
      },
      "use_cases": [
        "Open-world exploration (STALKER, Fallout-style)",
        "Wilderness travel with random encounters",
        "Tactical journey interruption (ambushes, patrols)",
        "Dynamic environmental events",
        "Resource scarcity (forced detours, supply finds)"
      ],
      "architecture": "DM-as-Glue: Session manager only moves party. DM calls dm-encounter.sh separately when travel occurs. No tight coupling to CORE.",
      "_status": "Active"
    },
    "inventory-system": {
      "id": "inventory-system",
      "name": "Inventory System",
      "version": "1.0.0",
      "description": "Unified inventory manager with atomic transactions, stackable items, and unique item tracking",
      "category": "character-mechanics",
      "tags": ["inventory", "items", "gold", "loot", "transactions"],
      "dependencies": [],
      "soft_dependencies": [],
      "incompatible_with": [],
      "enabled_by_default": true,
      "features": [
        "Atomic multi-change transactions (gold + items + stats in one call)",
        "Stackable items with quantities (medkit x3, ammo x60)",
        "Unique items (weapons, armor, quest items)",
        "Test mode (--test flag for dry runs)",
        "Auto-migration from legacy equipment array format"
      ],
      "activation": {
        "type": "always",
        "condition": "module directory exists"
      },
      "adds_to_core": {
        "tools": ["dm-inventory.sh"],
        "commands": {
          "dm-inventory.sh show [name]": "Display full inventory",
          "dm-inventory.sh update [name] --gold X --hp X --xp X --add Item qty ...": "Atomic update"
        }
      },
      "_status": "Active"
    },
    "quest-system": {
      "id": "quest-system",
      "name": "Quest System",
      "version": "1.0.0",
      "description": "Plot/quest creation with full metadata (NPCs, locations, objectives, rewards)",
      "category": "narrative",
      "tags": ["quests", "plots", "hooks", "objectives"],
      "dependencies": [],
      "soft_dependencies": [],
      "incompatible_with": [],
      "enabled_by_default": true,
      "features": [
        "Create plots with type, NPCs, locations, objectives",
        "Rewards and consequences tracking",
        "Integrates with CORE plot_manager.py for storage"
      ],
      "activation": {
        "type": "always",
        "condition": "module directory exists"
      },
      "adds_to_core": {
        "tools": ["dm-quest.sh"],
        "commands": {
          "dm-quest.sh add <name> <desc> [OPTIONS]": "Create new plot/quest",
          "dm-plot.sh add ...": "Delegates to this module"
        }
      },
      "_status": "Active"
    },
    "survival-stats": {
      "id": "survival-stats",
      "name": "Survival Stats & Time Effects",
      "version": "1.0.0",
      "author": "DM System Core",
      "description": "Custom character stats (hunger, thirst, radiation) with automatic time-based changes and conditional effects",
      "category": "character-mechanics",
      "tags": [
        "survival",
        "stats",
        "time",
        "hunger",
        "radiation"
      ],
      "dependencies": [],
      "soft_dependencies": [],
      "incompatible_with": [],
      "enabled_by_default": false,
      "features": [
        "Define any custom stats (hunger, thirst, radiation, sleep, oxygen, etc.)",
        "Time effects engine with per-hour stat changes",
        "Conditional effects (e.g., artifact healing only when HP < max)",
        "Per-tick simulation for accurate effect timing",
        "Sleep restoration mode (--sleeping flag)",
        "Stat consequences (damage, conditions when thresholds crossed)",
        "Auto-tick during travel and time advancement"
      ],
      "activation": {
        "type": "field-based",
        "condition": "character has custom_stats{} OR campaign_rules.time_effects.enabled = true"
      },
      "adds_to_core": {
        "tools": [
          "dm-survival.sh"
        ],
        "commands": {
          "dm-survival.sh tick": "Apply time effects to custom stats",
          "dm-survival.sh status": "Show current custom stats"
        },
        "data_fields": {
          "character.json": {
            "custom_stats": {
              "hunger": {
                "current": 80,
                "min": 0,
                "max": 100
              },
              "thirst": {
                "current": 70,
                "min": 0,
                "max": 100
              }
            }
          },
          "campaign_rules": {
            "time_effects": {
              "enabled": true,
              "effects_per_hour": {},
              "stat_consequences": [],
              "rules": []
            }
          }
        }
      },
      "use_cases": [
        "Survival games (STALKER, Fallout, Rust)",
        "Resource management campaigns",
        "Environmental hazards (radiation, temperature)",
        "Space exploration (oxygen, fuel)",
        "Psychological horror (sanity, stress)"
      ],
      "_status": "Active"
    }
  }
}